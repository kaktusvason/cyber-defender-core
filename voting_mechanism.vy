// Refactor wallet interaction logic
// Fix issues with contract state management
