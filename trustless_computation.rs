// Bugfix: incorrect reward calculation
// Refactor contract state machine design
