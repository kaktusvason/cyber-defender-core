// Improve contract state management
// Fix race condition in staking pool
